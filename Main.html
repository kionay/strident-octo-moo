<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	window.records = [];
	$("#inputBox").keypress(function(e){
	    if(e.keyCode==13){
	        $("#recordButton").click();
	        $("#inputBox,#bigTextInput").val("");
	    }
	});
	$("#bigTextInput").hide();
	$("#bigInputCheck").click(function(){
		$("#inputBox").toggle(!this.checked).val("");
		$("#bigTextInput").toggle(this.checked).val("");
	});
});

var excludeList = [" ","","\n",".",",","?","!","\"","'","/","\\",":","(",")","[","]","^"]

function record(){
	var linedInput = $(
			($("#inputBox").is(":visible")) //if inputBox is visible
				?	("#inputBox")   //then use inputBox
				:	("#bigTextInput")//else use bigTextInput (textArea)
			).val().split("\n");
	var inList = false;
	$.each(linedInput,function(index,value){ //for each line
		var splitOnSpace = value.split(" ");
		$.each(splitOnSpace, function (wordIndex, wordValue) { //for each word
			for(var exIndex = 0; exIndex < excludeList.length; exIndex++){
				inList = (excludeList[exIndex] == wordValue || inList == true)?(true):(false);
			}
		    	if(!inList){
		        	window.records.push(wordValue.toLowerCase());
		    	}
		});
		$("#listId").append("<li>" + value + "</li>");
	});
	$("#bigTextInput").val("");
}
function wordFrequency(givenWord){
	var occurrences = 0;
	var matchResults = [];
	$.each($(window).attr("records"),function(index,value){ //for each recorded word
		if(value.toLowerCase().indexOf(givenWord.toLowerCase()) >= 0){
			occurrences++;
		}
	});
	var returnPercentage = ((occurrences / $(window).attr("records").length*100)||0).toFixed(2)
	return parseFloat(returnPercentage)
}

function mergeSort(inArray){
	if(inArray.length<=1) return inArray;
	
	var leftArray = [];
	var rightArray = [];
	var midPoint = inArray.length / 2;
	
	//populate left and right arrays
	for(var item = 0; item < inArray.length; item++){
		if(item < midPoint){ leftArray.push(inArray[item]); }
		else { rightArray.push(inArray[item]); }
	}

	//sort each smaller list
	leftArray = mergeSort(leftArray);
	rightArray = mergeSort(rightArray);

	//combine(merge) smaller sorted lists
	return merge(leftArray, rightArray);
}

function merge(leftArray, rightArray){
	var mergedArray = [];

	while(leftArray.length != 0 && rightArray.length != 0)
	{
		if(leftArray[0][1] <= rightArray[0][1]){ 
			mergedArray.push(leftArray[0]);
			leftArray.shift();
		} else {
			mergedArray.push(rightArray[0]);
			rightArray.shift();
		}
	}

	while(leftArray.length != 0){
		mergedArray.push(leftArray[0]);
		leftArray.shift();
	}
	while(rightArray.length != 0){
		mergedArray.push(rightArray[0]);
		rightArray.shift();
	}

	return mergedArray;
	
}

function rankWordFrequencyUnordered(){
	var unorderedFrequency = [];
	
	$.each($(window).attr("records"), function (index, value) {
		//console.log("Processing word \"" + value + "\"");
		if(wordInFrequencyList(value, unorderedFrequency)>0){
			//new word, find frequency, add to list
			unorderedFrequency.push([value,wordFrequency(value)]);
		}
	});
	return unorderedFrequency;
}


function wordInFrequencyList(word, list){
	for(var index = 0; index < list.length; index++){
		if(list[index][0] == word.replace(new RegExp((word[0]==":")?('[,?.!"]'):('[,?.!)"(]'), 'g'))) return index;
	}
	return -1;
}

function jQueryInArray(ArrayToSearch, SampleArrayItemToSearchFor){
	return $.inArray(SampleArrayItemToSearchFor.replace(new RegExp('[,?.!)(]', 'g'), ''), ArrayToSearch);
}

</script>
</head>
<body>
<input type="button" id="recordButton" value="Record" onclick="record()"/>
<br>
Big Input Mode <input type="checkbox" id="bigInputCheck"/>
<br>
<input type="text" id="inputBox" placeholder="Enter Text Here."/>
<textarea rows="10" cols="60" id="bigTextInput" placeholder="Enter Text Here. Input will be seperated line-by-line."></textarea>
<br>
<ol id="listId">
</ol>
</body>
</html>
