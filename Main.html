<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(function(){
	window.records = [];
	$("#inputBox").keypress(function(e){
		if(e.keyCode==13)
		$("#recordButton").click();
	});

	$("#bigTextInput").hide();

	$("#bigInputCheck").click(function(){
		$("#inputBox").toggle(!this.checked).val("");
		$("#bigTextInput").toggle(this.checked).val("");
	});
});

function record(){

	var linedInput = $(
			($("#inputBox").is(":visible")) //if inputBox is visible
				?	("#inputBox")   //then use inputBox
				:	("#bigTextInput")//else use bigTextInput (textArea)
			).val().split("\n");

	$.each(linedInput,function(index,value){ //for each line
		var splitOnSpace = value.split(" ");
		$.each(splitOnSpace ,function(wordIndex, wordValue){ //for each word
			window.records.push(wordValue);
		});
		$("#listId").append("<li>" + value + "</li>");
	});
	$("#bigTextInput").val("");

}

function wordFrequency(givenWord){
	var occurrences = 0;

	var matchResults = [];

	$.each($(window).attr("records"),function(index,value){ //for each recorded word
		if(value.toLowerCase().indexOf(givenWord.toLowerCase()) >= 0){
			occurrences++;
		}
	});
	var returnPercentage = (occurrences / $(window).attr("records").length*100).toFixed(2)
	return returnPercentage + "%"
}

function rankWordFrequency(){
	var rankDictionary = [];
	$.each($(window).attr("records"),function(index,value){
		//TODO
	});
}

/*
inArrayRecursive finds the first matching record, not all matching records
this is because this is meant to be used to search a single depth list
in fact this function's recursive ability probably isn't neccessary
but who knows i may end up using it in some other code one day
*/

function inArrayRecursive(ArrayToSearch, SampleArrayItemToSearchFor){ 
	var foundItem = false;
	var foundIndexList = [];
	for(var i = 0; i < ArrayToSearch.length;i++){
		// for every item in the array, are any of them arrays?
		if(Array.isArray(ArrayToSearch[i])){
			var innerArrayResult = inArrayRecursive(ArrayToSearch[i], SampleArrayItemToSearchFor);
			if(innerArrayResult[0] == true){ //the item is found recursively somewhere
				foundItem = true;	
				foundIndexList = innerArrayResult[1];
				foundIndexList.push(i);
				return([foundItem,foundIndexList]);
			}
		}
		else{	//item is not an array, check to see if it contains our value
			if(ArrayToSearch[i] == SampleArrayItemToSearchFor){
				//found the item
				foundItem = true;	
				foundIndexList.push(i);
				return([foundItem,foundIndexList]);
			}
		}
	}
	//if we made it here then we were never returned, so we can assume the search didn't find anything
	return([false]);
		
}
</script>
</head>
<body>
<input type="button" id="recordButton" value="Record" onclick="record()"/>
<br>
Big Input Mode <input type="checkbox" id="bigInputCheck"/>
<br>
<input type="text" id="inputBox" placeholder="Enter Text Here."/>
<textarea rows="10" cols="60" id="bigTextInput" placeholder="Enter Text Here. Input will be seperated line-by-line."></textarea>
<br>
<ol id="listId">
</ol>
</body>
</html>
